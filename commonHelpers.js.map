{"version":3,"file":"commonHelpers.js","sources":["../src/js/notifications.js","../src/js/render-html.js","../src/js/download.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst octagonIconUrl = new URL('../img/octagon.svg', import.meta.url).href;\nconst closeIconUrl = new URL('../img/x.svg', import.meta.url).href;\n\nexport function createMessage(textMessage = '') {\n  const options = {\n    titleColor: '#FFF',\n    titleSize: '16px',\n    message: textMessage,\n    messageColor: '#FFF',\n    messageSize: '16px',\n    maxWidth: '462px',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconUrl: octagonIconUrl,\n    progressBarColor: '#FFBEBE',\n    timeout: 5000,\n    targetFirst: false,\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" id=\"izi-close-button\">\n          <img src=\"${closeIconUrl}\" alt=\"\" width=\"16px\" height=\"16px\" />\n        </button>`,\n        function (instance, toast) {\n          instance.hide({}, toast, 'buttonName');\n        },\n      ],\n    ],\n  };\n\n  iziToast.show(options);\n\n  customizeMessageStyles();\n}\n\nfunction customizeMessageStyles() {\n  // div самого вікна\n  let messageElement = document.querySelector('.iziToast.fadeInUp');\n  if (messageElement) {\n    messageElement.style.paddingTop = '20px';\n    messageElement.style.paddingBottom = '20px';\n  }\n\n  // текст помилки\n  messageElement = document.querySelector(\n    '.iziToast>.iziToast-body .iziToast-texts'\n  );\n  if (messageElement) {\n    messageElement.style.maxWidth = '322px';\n  }\n}\n","import { createMessage } from './notifications';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nexport function renderImages(images, isLoadMore) {\n  if (images.hits.length === 0) {\n    createMessage(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  if (!isLoadMore) {\n    clearGallery();\n  }\n\n  const galleryHTML = images.hits.map(imageEl => {\n    return `\n      <a class=\"gallery-link\" href=\"${imageEl.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${imageEl.webformatURL}\"\n          alt=\"${imageEl.tags}\"\n        />\n        <ul class=\"property-list\">\n          <li class=\"property-item\">\n            <p class=\"property-title\">Likes</p>\n            <p class=\"property-value\">${imageEl.likes}</p>\n          </li>\n          <li class=\"property-item\">\n            <p class=\"property-title\">Views</p>\n            <p class=\"property-value\">${imageEl.views}</p>\n          </li>\n          <li class=\"property-item\">\n            <p class=\"property-title\">Comments</p>\n            <p class=\"property-value\">${imageEl.comments}</p>\n          </li>\n          <li class=\"property-item\">\n            <p class=\"property-title\">Downloads</p>\n            <p class=\"property-value\">${imageEl.downloads}</p>\n          </li>\n        </ul>\n      </a>`;\n  }).join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', galleryHTML);\n  gallery.refresh();\n}\n\nfunction clearGallery() {\n  galleryEl.innerHTML = '';\n}\n","import { renderImages } from './render-html';\nimport { createMessage } from './notifications';\nimport axios from 'axios';\n\nconst searchParams = {\n  key: '41460845-2ab95350f4581127087fd5faf',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 40,\n  page: 1,\n};\n\nconst searchBtn = document.querySelector('.search-btn');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst searchLoadingTextEl = document.querySelector('.main-load');\nconst moreLoadingTextEl = document.querySelector('.more-load');\n\nexport async function downloadImages(searchKey, isLoadMore = false) {\n  try {\n    updateUIBeforeRequest(isLoadMore);\n    \n    searchParams.q = searchKey;\n    \n    const images = await fetchImages();\n    \n    renderImages(images, isLoadMore);\n\n    updateUIAfterRequest(isLoadMore, images.totalHits);\n  } catch (error) {\n    handleError(isLoadMore, error);\n  }\n}\n\nfunction updateUIBeforeRequest(isLoadMore) {\n  if (isLoadMore) {\n    moreLoadingTextEl.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n    loadMoreBtn.blur();\n\n    if (searchParams.page === 1) searchParams.page++;\n  } else {\n    searchLoadingTextEl.style.display = 'block';\n    searchBtn.disabled = true;\n    searchBtn.blur();\n\n    searchParams.page = 1;\n  }\n}\n\nfunction updateUIAfterRequest(isLoadMore, totalHits) {\n  if (isLoadMore) {\n    searchParams.page++;\n\n    const elementRect = document\n      .querySelector('.gallery-link')\n      .getBoundingClientRect();\n    window.scrollBy({\n      top: elementRect.height * 2.0,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n    if (searchParams.per_page * searchParams.page >= totalHits)\n      createMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    else loadMoreBtn.style.display = 'flex';\n\n    moreLoadingTextEl.style.display = 'none';\n  } else {\n    searchLoadingTextEl.style.display = 'none';\n    searchBtn.disabled = false;\n    loadMoreBtn.style.display = 'flex';\n  }\n}\n\nfunction handleError(isLoadMore, error) {\n  createMessage(error);\n\n  if (isLoadMore) {\n    loadMoreBtn.style.display = 'flex';\n    moreLoadingTextEl.style.display = 'none';\n  } else {\n    searchLoadingTextEl.style.display = 'none';\n    searchBtn.disabled = false;\n    loadMoreBtn.style.display = 'flex';\n  }\n}\n\nasync function fetchImages() {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: { ...searchParams },\n  });\n\n  return response.data;\n}\n","import { createMessage } from './js/notifications';\nimport { downloadImages } from './js/download';\n\nconst formEl = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst mainLoadEl = document.querySelector('.main-load');\nconst moreLoadEl = document.querySelector('.more-load');\n\nmainLoadEl.style.display = 'none';\nmoreLoadEl.style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nlet searchKey;\n\nconst hideElement = element => {\n  if (element) {\n    element.style.display = 'none';\n  }\n};\n\nconst showElement = element => {\n  if (element) {\n    element.style.display = 'block';\n  }\n};\n\nconst handleFormSubmit = async event => {\n  event.preventDefault();\n\n  searchKey = formEl.elements.search.value.trim();\n  if (!searchKey) {\n    createMessage('Search must be filled!');\n    return;\n  }\n\n  formEl.reset();\n  hideElement(mainLoadEl);\n  hideElement(moreLoadEl);\n\n  try {\n    await downloadImages(searchKey);\n    showElement(loadMoreBtn);\n  } catch (error) {\n    console.error('Error downloading images:', error);\n  }\n};\n\nconst handleLoadMoreClick = async () => {\n  hideElement(mainLoadEl);\n  showElement(moreLoadEl);\n\n  try {\n    await downloadImages(searchKey, true);\n  } catch (error) {\n    console.error('Error loading more images:', error);\n  } finally {\n    hideElement(moreLoadEl);\n  }\n};\n\nformEl.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMoreClick);\n"],"names":["octagonIconUrl","closeIconUrl","createMessage","textMessage","options","instance","toast","iziToast","customizeMessageStyles","messageElement","galleryEl","gallery","SimpleLightbox","renderImages","images","isLoadMore","clearGallery","galleryHTML","imageEl","searchParams","searchBtn","loadMoreBtn","searchLoadingTextEl","moreLoadingTextEl","downloadImages","searchKey","updateUIBeforeRequest","fetchImages","updateUIAfterRequest","error","handleError","totalHits","elementRect","axios","formEl","mainLoadEl","moreLoadEl","hideElement","element","showElement","handleFormSubmit","event","handleLoadMoreClick"],"mappings":"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"}